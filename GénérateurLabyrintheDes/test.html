<!--/*--------------------------------------------
    Author: https://github.io/orey/gme
    Creation date: June 18 2022
    Under GNU GPL v3 licence
  --------------------------------------------
    Application complète GME
  --------------------------------------------
    L'idée est un peu saugrenue. Faire une application offline
    tenant dans une seule page avec le HTML, le CSS et tout le 
    JavaScript, sans utiliser aucune inclusion mais juste des
    fonctionnalités standard.
--------------------------------------------*/-->
<!DOCTYPE html>
<html>
  <head lang="en">
    <title>Test</title>
    <meta charset="UTF-8">
    <!--=================================================-->
    <!--================== CSS= =========================-->
    <!--=================================================-->
    <style>
      .row {
          display: flex;
          flex-wrap: wrap;
          padding: 0 4px;
      }
      
      /* Create two equal columns that sits next to each other */
      .column {
          flex: 50%;
          padding: 0 4px;
      }
      
      .column img {
          margin-top: 8px;
          vertical-align: middle;
      }
    </style>
  </head>
  <!--=================================================-->
  <!--================== HTML =========================-->
  <!--=================================================-->
  <body>
    <h1>Générateur de labyrinthe</h1>
    <label for="fname">Size</label>
    <input type="number" id="size" name="size">
    <input type="submit" value="Générer la grille" onclick="buildGrid();"><br><br>
    <div id="mygrid">
    </div>
    <!--
    <div class="row">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
    </div>
    <div class="row">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
      <img src="----.svg">
    </div> -->
    <br><br>
    <div>
      &#169; 2023 <a href="https://orey.github.io/blog/">rouboudou</a> - Version 1.0 - 17 août 2023<br>
      Testé sous Firefox
    </div>
  </body>
  <!--=================================================-->
  <!--================== CODE =========================-->
  <!--=================================================-->
  <script language="JavaScript">
    let GRID = null;
    let SIZ = 0;
    //======================================= UTILS
    function writeInZone(zone, text){
        document.getElementById(zone).innerHTML = text;
    }
    function cleanZone(zone){
        document.getElementById(zone).innerHTML = "";
    }
    function getZone(zone){
        return document.getElementById(zone).value;
    }
    
    //======================================= UTILS
    function buildGrid(){
        SIZ = Number(getZone("size"));
        GRID = Array(SIZ).fill(Array(SIZ).fill('----'));
/*        let output = "";
        for (let i=0;i<SIZ;i++) {
            let line = String(i).padStart(4, '0');
            output += '<div id="row' + line +'" class="row">';
            for (let j=0;j<SIZ;j++) {
                let x = String(j).padStart(4, '0');
                let y = String(i).padStart(4, '0');
                output += '<img id="' + x + '-' + y + '" src="----.svg" onclick="treatCell(' + j + ',' + i + ')">';
            }
            output += "</div>";
            }
        writeInZone("mygrid", output); */
        displayGrid();
        //alert(s);
    }

    function displayGrid(){
        let output = "";
        for (let i=0;i<SIZ;i++) {
            output += '<div class="row">';
            for (let j=0;j<SIZ;j++) {
                output += '<img src="' + GRID[i][j] + '.svg" onclick="treatCell(' + j + ',' + i + ');console.log(\'toto\');">';
            }
            output += "</div>";
        }
        writeInZone("mygrid", output)
    }

    function treatCell(x, y) {
        console.log(x + "-" + y);
        console.log(GRID);
        /*let line = GRID[y];
          line[x] = "NESO";*/
        GRID[y][x] = "NESO";
        displayGrid();
    }
    
  </script>
</html>
